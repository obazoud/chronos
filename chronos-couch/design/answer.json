{
   "_id": "_design/answer",
   "updates": {
       "accumulate": "function (doc, req) { 
          question= parseInt(req.query.question);
           reponse= parseInt(req.query.reponse);
           correct= parseInt(req.query.correct);
         
           if (reponse == correct) {
                valeur=parseInt(req.query.valeur);
                bonus= doc.lastbonus;
                doc.lastbonus = doc.lastbonus + 1;
                inc = valeur + bonus;
                doc.score = doc.score + inc;
           } else {
             doc.lastbonus = 0;
           }
          doc.reponses.push(reponse);
          doc.questions.push(question);
          return [doc, doc.score + \"\"];
        }"
    }
}